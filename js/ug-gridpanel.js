function UGGridPanel(){var e,r,i,a,t=this,n=jQuery(this),d=new UniteGalleryMain,o=new UGFunctions,l=new UGThumbsGrid,g=new UGPanelsBase;this.events={FINISH_MOVE:"gridpanel_move_finish",OPEN_PANEL:"open_panel",CLOSE_PANEL:"close_panel"};var _={gridpanel_vertical_scroll:!0,gridpanel_grid_align:"middle",gridpanel_padding_border_top:10,gridpanel_padding_border_bottom:4,gridpanel_padding_border_left:10,gridpanel_padding_border_right:10,gridpanel_arrows_skin:"",gridpanel_arrows_align_vert:"middle",gridpanel_arrows_padding_vert:4,gridpanel_arrows_align_hor:"center",gridpanel_arrows_padding_hor:10,gridpanel_space_between_arrows:20,gridpanel_arrows_always_on:!1,gridpanel_enable_handle:!0,gridpanel_handle_align:"top",gridpanel_handle_offset:0,gridpanel_handle_skin:"",gridpanel_background_color:""},s={gridpanel_grid_align:"middle",gridpanel_padding_border_top:2,gridpanel_padding_border_bottom:2},p={gridpanel_grid_align:"center"},h={panelType:"grid",isHorType:!1,arrowsVisible:!1,panelHeight:0,panelWidth:0,originalPosX:null,isEventsInited:!1,isClosed:!1,orientation:null};function c(){if(null==h.orientation)throw new Error("Wrong orientation, please set panel orientation before run")}function b(){c(),"center"==_.gridpanel_grid_align&&(_.gridpanel_grid_align="middle"),l.run(),function(){var e=!1;if(1==_.gridpanel_arrows_always_on)e=!0;else{l.getNumPanes()>1&&(e=!0)}1==e?(i.show().fadeTo(0,1),a.show().fadeTo(0,1),h.arrowsVisible=!0):(i.hide(),a.hide(),h.arrowsVisible=!1)}(),function(){var e=l.getSize();1==h.isHorType?h.panelHeight=e.height+_.gridpanel_padding_border_top+_.gridpanel_padding_border_bottom:h.panelWidth=e.width+_.gridpanel_padding_border_left+_.gridpanel_padding_border_right;o.setElementSize(r,h.panelWidth,h.panelHeight)}(),function(){0==h.isHorType?1==_.gridpanel_vertical_scroll?1==h.arrowsVisible?function(){var e,r,t,n,d=o.getElementSize(a),g=l.getSize();switch(_.gridpanel_grid_align){default:case"top":e=_.gridpanel_padding_border_top+d.height+_.gridpanel_arrows_padding_vert;break;case"middle":e="middle";break;case"bottom":e=h.panelHeight-g.height-d.height-_.gridpanel_padding_border_bottom-_.gridpanel_arrows_padding_vert}var s=u(),p=l.getElement();switch(o.placeElement(p,s,e),g=l.getSize(),_.gridpanel_arrows_align_vert){default:case"center":case"middle":r=(g.top-d.height)/2,t=g.bottom+(h.panelHeight-g.bottom-d.height)/2,n=0;break;case"grid":r=g.top-d.height-_.gridpanel_arrows_padding_vert_vert,t=g.bottom+_.gridpanel_arrows_padding_vert,n=0;break;case"border":case"borders":r=_.gridpanel_padding_border_top,t="bottom",n=_.gridpanel_padding_border_bottom}o.placeElement(a,"center",r),o.placeElement(i,"center",t,0,n)}():m():1==h.arrowsVisible?function(){var e,r,t,n=o.getElementSize(a),d=l.getSize(),g=_.gridpanel_padding_border_top;switch(_.gridpanel_grid_align){case"middle":switch(_.gridpanel_arrows_align_vert){default:var s=d.height+_.gridpanel_arrows_padding_vert+n.height;g=(h.panelHeight-s)/2;break;case"border":case"borders":g=(h.panelHeight-n.height-_.gridpanel_padding_border_bottom-d.height)/2}break;case"bottom":s=d.height+n.height+_.gridpanel_arrows_padding_vert,g=h.panelHeight-s-_.gridpanel_padding_border_bottom}var p=l.getElement(),c=u();switch(o.placeElement(p,c,g),d=l.getSize(),_.gridpanel_arrows_align_vert){default:case"center":case"middle":e=d.bottom+(h.panelHeight-d.bottom-n.height)/2,t=0;break;case"grid":e=d.bottom+_.gridpanel_arrows_padding_vert,t=0;break;case"border":case"borders":e="bottom",t=_.gridpanel_padding_border_bottom}r=-n.width/2-_.gridpanel_space_between_arrows/2,o.placeElement(a,"center",e,r,t);var b=Math.abs(r);o.placeElement(i,"center",e,b,t)}():m():1==h.arrowsVisible?function(){var e,r,t,n,d=o.getElementSize(a),g=l.getSize();switch(_.gridpanel_grid_align){default:case"left":e=_.gridpanel_padding_border_left+_.gridpanel_arrows_padding_hor+d.width;break;case"middle":case"center":e="center";break;case"right":e=h.panelWidth-g.width-d.width-_.gridpanel_padding_border_right-_.gridpanel_arrows_padding_hor}var s=l.getElement();switch(o.placeElement(s,e,_.gridpanel_padding_border_top),g=l.getSize(),_.gridpanel_arrows_align_vert){default:case"center":case"middle":n=(g.height-d.height)/2+g.top;break;case"top":n=_.gridpanel_padding_border_top+_.gridpanel_arrows_padding_vert;break;case"bottom":n=h.panelHeight-_.gridpanel_padding_border_bottom-_.gridpanel_arrows_padding_vert-d.height}switch(_.gridpanel_arrows_align_hor){default:case"borders":r=_.gridpanel_padding_border_left,t=h.panelWidth-_.gridpanel_padding_border_right-d.width;break;case"grid":r=g.left-_.gridpanel_arrows_padding_hor-d.width,t=g.right+_.gridpanel_arrows_padding_hor;break;case"center":r=(g.left-d.width)/2,t=g.right+(h.panelWidth-g.right-d.width)/2}o.placeElement(a,r,n),o.placeElement(i,t,n)}():function(){var e,r=l.getSize();switch(_.gridpanel_grid_align){default:case"left":e=_.gridpanel_padding_border_left;break;case"middle":case"center":e="center";break;case"right":e=h.panelWidth-r.width-_.gridpanel_padding_border_right}var i=l.getElement();o.placeElement(i,e,_.gridpanel_padding_border_top)}();g.placeElements()}(),function(){if(1==h.isEventsInited)return!1;h.isEventsInited=!0,a&&(o.addClassOnHover(a),l.attachPrevPaneButton(a));i&&(o.addClassOnHover(i),l.attachNextPaneButton(i));g.initEvents()}()}function w(){e.append("<div class='ug-grid-panel'></div>"),r=e.children(".ug-grid-panel"),h.isHorType?(r.append("<div class='grid-arrow grid-arrow-left-hortype ug-skin-"+_.gridpanel_arrows_skin+"'></div>"),r.append("<div class='grid-arrow grid-arrow-right-hortype ug-skin-"+_.gridpanel_arrows_skin+"'></div>"),a=r.children(".grid-arrow-left-hortype"),i=r.children(".grid-arrow-right-hortype")):0==_.gridpanel_vertical_scroll?(r.append("<div class='grid-arrow grid-arrow-left ug-skin-"+_.gridpanel_arrows_skin+"'></div>"),r.append("<div class='grid-arrow grid-arrow-right ug-skin-"+_.gridpanel_arrows_skin+"'></div>"),a=r.children(".grid-arrow-left"),i=r.children(".grid-arrow-right")):(r.append("<div class='grid-arrow grid-arrow-up ug-skin-"+_.gridpanel_arrows_skin+"'></div>"),r.append("<div class='grid-arrow grid-arrow-down ug-skin-"+_.gridpanel_arrows_skin+"'></div>"),a=r.children(".grid-arrow-up"),i=r.children(".grid-arrow-down")),g.setHtml(r),a.fadeTo(0,0),i.fadeTo(0,0),l.setHtml(r),""!=_.gridpanel_background_color&&r.css("background-color",_.gridpanel_background_color)}function u(){return _.gridpanel_padding_border_left}function m(){var e=_.gridpanel_grid_align,r=0;switch(e){case"top":r=_.gridpanel_padding_border_top;break;case"bottom":r=_.gridpanel_padding_border_bottom}var i=u(),a=l.getElement();o.placeElement(a,i,e,0,r)}this.destroy=function(){a&&o.destroyButton(a),i&&o.destroyButton(i),g.destroy(),l.destroy()},this.getOrientation=function(){return h.orientation},this.setOrientation=function(e){switch(h.orientation=e,e){case"right":case"left":h.isHorType=!1;break;case"top":case"bottom":h.isHorType=!0;break;default:throw new Error("Wrong grid panel orientation: "+e)}},this.setHeight=function(e){if(1==h.isHorType)throw new Error("setHeight is not appliable to this orientatio ("+h.orientation+"). Please use setWidth");h.panelHeight=e;var r,a,t=(r=_.gridpanel_padding_border_top+_.gridpanel_padding_border_bottom,a=h.panelHeight-r,0==_.gridpanel_arrows_always_on&&1==l.getNumPanesEstimationByHeight(a)?a:(r=o.getElementSize(i).height+_.gridpanel_arrows_padding_vert,1==_.gridpanel_vertical_scroll&&(r*=2),r+=_.gridpanel_padding_border_top+_.gridpanel_padding_border_bottom,a=h.panelHeight-r));l.setMaxHeight(t)},this.setWidth=function(e){if(0==h.isHorType)throw new Error("setWidth is not appliable to this orientatio ("+h.orientation+"). Please use setHeight");h.panelWidth=e;var r,a,t=(r=_.gridpanel_padding_border_left+_.gridpanel_padding_border_right,a=h.panelWidth-r,0==_.gridpanel_arrows_always_on&&1==l.getNumPanesEstimationByWidth(a)?a:(r+=2*(o.getElementSize(i).width+_.gridpanel_arrows_padding_hor),a=h.panelWidth-r));l.setMaxWidth(t)},this.init=function(r,i){!function(r,i){d=r,c(),i&&i.vertical_scroll&&(_.gridpanel_vertical_scroll=i.vertical_scroll),_=jQuery.extend(_,i),1==h.isHorType?(_=jQuery.extend(_,p),_=jQuery.extend(_,i)):1==_.gridpanel_vertical_scroll&&(_=jQuery.extend(_,s),(_=jQuery.extend(_,i)).grid_panes_direction="bottom");var a=d.getOptions().gallery_skin;""==_.gridpanel_arrows_skin&&(_.gridpanel_arrows_skin=a);var o=r.getObjects();e=o.g_objWrapper,g.init(d,h,t,_,n),(l=new UGThumbsGrid).init(d,_)}(r,i)},this.setHtml=function(){w()},this.run=function(){b()},this.getElement=function(){return r},this.getSize=function(){return o.getElementSize(r)},this.__________Functions_From_Base_____=function(){},this.isPanelClosed=function(){return g.isPanelClosed()},this.getClosedPanelDest=function(){return g.getClosedPanelDest()},this.openPanel=function(e){g.openPanel(e)},this.closePanel=function(e){g.closePanel(e)},this.setOpenedState=function(e){g.setOpenedState(e)},this.setClosedState=function(e){g.setClosedState(e)},this.setDisabledAtStart=function(e){g.setDisabledAtStart(e)}}