function UGPanelsBase(){var e,n,t,a,i,l,s,o=new UniteGalleryMain,r=this,d=new UGFunctions;function h(n,a){switch(e.orientation){case"right":case"left":var i={left:n+"px"};break;case"top":case"bottom":i={top:n+"px"}}t.stop(!0).animate(i,{duration:300,easing:"easeInOutQuad",queue:!1,complete:function(){a&&a()}})}function p(n){switch(e.orientation){case"right":case"left":d.placeElement(t,n,null);break;case"top":case"bottom":d.placeElement(t,null,n)}}function c(){i.trigger(n.events.FINISH_MOVE)}this.init=function(t,l,r,d,h){e=l,n=r,o=t,a=d,i=h,s=jQuery(o)},this.setHtml=function(i){if(t=i,"strip"==e.panelType)var s=a.strippanel_enable_handle;else s=a.gridpanel_enable_handle;if(1==s&&((l=new UGPanelHandle).init(n,t,a,e.panelType,o),l.setHtml()),!0===e.isDisabledAtStart){t.append("<div class='ug-overlay-disabled'></div>"),setTimeout((function(){t.children(".ug-overlay-disabled").hide()}),e.disabledAtStartTimeout)}},this.placeElements=function(){l&&l.placeHandle()},this.initEvents=function(){l&&(l.initEvents(),s.on(o.events.SLIDER_ACTION_START,(function(){l.hideHandle()})),s.on(o.events.SLIDER_ACTION_END,(function(){l.showHandle()})))},this.destroy=function(){l&&(l.destroy(),s.off(o.events.SLIDER_ACTION_START),s.off(o.events.SLIDER_ACTION_END))},this.openPanel=function(a){if(!a)a=!1;return!t.is(":animated")&&(0!=e.isClosed&&(e.isClosed=!1,i.trigger(n.events.OPEN_PANEL),void(!1===a?h(e.originalPos,c):(p(e.originalPos),c()))))},this.closePanel=function(a){if(!a)a=!1;if(t.is(":animated"))return!1;if(1==e.isClosed)return!1;var l=r.getClosedPanelDest();e.isClosed=!0,i.trigger(n.events.CLOSE_PANEL),!1===a?h(l,c):(p(l),c())},this.setClosedState=function(t){e.originalPos=t,i.trigger(n.events.CLOSE_PANEL),e.isClosed=!0},this.setOpenedState=function(t){i.trigger(n.events.OPEN_PANEL),e.isClosed=!1},this.getClosedPanelDest=function(){var n,a=d.getElementSize(t);switch(e.orientation){case"left":e.originalPos=a.left,n=-e.panelWidth;break;case"right":e.originalPos=a.left,n=o.getSize().width;break;case"top":e.originalPos=a.top,n=-e.panelHeight;break;case"bottom":e.originalPos=a.top,n=o.getSize().height}return n},this.isPanelClosed=function(){return e.isClosed},this.setDisabledAtStart=function(n){if(n<=0)return!1;e.isDisabledAtStart=!0,e.disabledAtStartTimeout=n}}function UGPanelHandle(){var e,n,t,a=new UGFunctions,i={panel_handle_align:"top",panel_handle_offset:0,panel_handle_skin:0};function l(){t.removeClass("ug-button-hover")}function s(e){if(e.stopPropagation(),e.stopImmediatePropagation(),0==a.validateClickTouchstartEvent(e.type))return!0;n.isPanelClosed()?n.openPanel():n.closePanel()}this.init=function(t,a,l,s,o){switch(n=t,e=a,s){case"grid":i.panel_handle_align=l.gridpanel_handle_align,i.panel_handle_offset=l.gridpanel_handle_offset,i.panel_handle_skin=l.gridpanel_handle_skin;break;case"strip":i.panel_handle_align=l.strippanel_handle_align,i.panel_handle_offset=l.strippanel_handle_offset,i.panel_handle_skin=l.strippanel_handle_skin;break;default:throw new Error("Panel handle error: wrong panel type: "+s)}var r=o.getOptions().gallery_skin;""==i.panel_handle_skin&&(i.panel_handle_skin=r)},this.setHtml=function(){var a="ug-panel-handle-tip";switch(n.getOrientation()){case"right":a+=" ug-handle-tip-left";break;case"left":a+=" ug-handle-tip-right";break;case"bottom":a+=" ug-handle-tip-top";break;case"top":a+=" ug-handle-tip-bottom"}e.append("<div class='"+a+" ug-skin-"+i.panel_handle_skin+"'></div>"),t=e.children(".ug-panel-handle-tip")},this.initEvents=function(){a.addClassOnHover(t),t.bind("click touchstart",s),jQuery(n).on(n.events.OPEN_PANEL,(function(){l(),t.removeClass("ug-button-closed")})),jQuery(n).on(n.events.CLOSE_PANEL,(function(){l(),t.addClass("ug-button-closed")}))},this.destroy=function(){a.destroyButton(t),jQuery(n).off(n.events.OPEN_PANEL),jQuery(n).off(n.events.CLOSE_PANEL)},this.placeHandle=function(){var e=a.getElementSize(t);!function(){switch(n.getOrientation()){case"right":case"left":"top"!=i.panel_handle_align&&"bottom"!=i.panel_handle_align&&(i.panel_handle_align="top");break;case"bottom":"left"!=i.panel_handle_align&&"right"!=i.panel_handle_align&&(i.panel_handle_align="left");break;case"top":"left"!=i.panel_handle_align&&"right"!=i.panel_handle_align&&(i.panel_handle_align="right")}}();var l=n.getOrientation();switch(l){case"left":a.placeElement(t,"right",i.panel_handle_align,-e.width);break;case"right":a.placeElement(t,-e.width,i.panel_handle_align,0,i.panel_handle_offset);break;case"top":a.placeElement(t,i.panel_handle_align,"bottom",i.panel_handle_offset,-e.height);break;case"bottom":a.placeElement(t,i.panel_handle_align,"top",i.panel_handle_offset,-e.height);break;default:throw new Error("Wrong panel orientation: "+l)}},this.hideHandle=function(){1==t.is(":visible")&&t.hide()},this.showHandle=function(){0==t.is(":visible")&&t.show()}}