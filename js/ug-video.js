function UGWistiaAPI(){this.isAPILoaded=!1;var e,t,i=this,n=jQuery(this),o=!1;function a(){return"undefined"!=typeof Wistia}function s(e,a,s,u,r){t=null,o=!1;var d=e+"_video",l="<div id='"+d+"' class='wistia_embed' style='width:"+s+";height:"+u+";' data-video-width='"+s+"' data-video-height='"+u+"'>&nbsp;</div>";jQuery("#"+e).html(l),t=Wistia.embed(a,{version:"v1",videoWidth:s,videoHeight:u,container:d,autoPlay:r}),o=!0,t.bind("play",(function(){n.trigger(i.events.START_PLAYING)})),t.bind("pause",(function(){n.trigger(i.events.STOP_PLAYING)})),t.bind("end",(function(){n.trigger(i.events.STOP_PLAYING),n.trigger(i.events.VIDEO_ENDED)}))}this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.loadAPI=function(){return 1==g_ugWistiaAPI.isAPILoaded||(a()?(g_ugWistiaAPI.isAPILoaded=!0,!0):(g_ugFunctions.loadJs("http://www.citizengage.co/fast.wistia.com/assets/external/E-v1.js",!0),void(g_ugWistiaAPI.isAPILoaded=!0)))},this.doCommand=function(e){if(null==t)return!1;if(0==o)return!1;switch(e){case"play":t.play();break;case"pause":t.pause()}},this.pause=function(){i.doCommand("pause")},this.play=function(){i.doCommand("play")},this.putVideo=function(t,i,n,o,u){if(a())return s(t,i,n,o,u),!0;this.loadAPI(),e=setInterval((function(){a()&&(s(t,i,n,o,u),clearInterval(e))}),500)},this.isPlayerReady=function(){return!(!o||!t)}}function UGSoundCloudAPI(){this.isAPILoaded=!1;var e,t,i,n=this,o=jQuery(this);function a(){return"undefined"!=typeof SC}function s(e,a,s,u,r){t=null,g_isPlayerReady=!1;var d=e+"_iframe",l=location.protocol+"//w.soundcloud.com/player/?url=http://api.soundcloud.com/tracks/"+a;l+="&amp;buying=false&amp;liking=false&amp;download=false&amp;sharing=false&amp;show_artwork=true&show_comments=false&amp;show_playcount=true&amp;show_user=false&amp;hide_related=true&amp;visual=true&amp;start_track=0&amp;callback=true";var c="<iframe id='"+d+"' src="+(l+=!0===r?"&amp;auto_play=true":"&amp;auto_play=false")+" width='"+s+"' height='"+u+"' frameborder='0' scrolling='no' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>";jQuery("#"+e).html(c),(t=SC.Widget(d)).bind(SC.Widget.Events.READY,(function(){t&&(g_isPlayerReady=!0,t.bind(SC.Widget.Events.PLAY,(function(){o.trigger(n.events.START_PLAYING)})),t.bind(SC.Widget.Events.PAUSE,(function(){o.trigger(n.events.STOP_PLAYING)})),t.bind(SC.Widget.Events.FINISH,(function(){o.trigger(n.events.STOP_PLAYING),o.trigger(n.events.VIDEO_ENDED)})))})),i=e}this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.loadAPI=function(){return 1==g_ugSoundCloudAPI.isAPILoaded||(a()?(g_ugSoundCloudAPI.isAPILoaded=!0,!0):(g_ugFunctions.loadJs("http://www.citizengage.co/w.soundcloud.com/player/api.js",!0),void(g_ugSoundCloudAPI.isAPILoaded=!0)))},this.putSound=function(t,i,n,o,u){if(a())return s(t,i,n,o,u),!0;this.loadAPI(),e=setInterval((function(){a()&&(s(t,i,n,o,u),clearInterval(e))}),500)},this.doCommand=function(e){if(null==t)return!1;if(0==g_isPlayerReady)return!1;switch(e){case"play":t.play();break;case"pause":t.pause()}},this.pause=function(){n.doCommand("pause")},this.play=function(){n.doCommand("play")},this.destroy=function(){g_isPlayerReady=!1,t=null,i&&(jQuery("#"+i).html(""),i=null)}}function UGHtml5MediaAPI(){this.isAPILoaded=!1;var e,t,i=this,n=jQuery(this);function o(){return"undefined"!=typeof mejs}function a(e,o,a,s,u){t=null,g_isPlayerReady=!1;var r=location.protocol+"//cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/flashmediaelement-cdn.swf",d=location.protocol+"//cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/silverlightmediaelement.xap",l=e+"_video",c="";u&&!0===u&&(c="autoplay='autoplay'");var y="";o.posterImage&&(y="poster='"+o.posterImage+"'");var v="<video id='"+l+"' width='"+a+"' height='"+s+"'  controls='controls' preload='none' "+c+" "+y+">";""!=o.mp4&&(v+="<source type='video/mp4' src='"+o.mp4+"' />"),""!=o.webm&&(v+="<source type='video/webm' src='"+o.webm+"' />"),""!=o.ogv&&(v+="<source type='video/ogg' src='"+o.ogv+"' />"),v+="<object width='"+a+"' height='"+s+"' type='application/x-shockwave-flash' data='"+r+"'>",v+="<param name='movie' value='"+r+"' />",v+="<param name='flashvars' value='controls=true&file="+o.mp4+"' />",v+="</object>",v+="</video>",jQuery("#"+e).html(v),new MediaElement(l,{enablePluginDebug:!1,flashName:r,silverlightName:d,success:function(e,o){g_isPlayerReady=!0,t=e,0==u&&t.pause(),g_ugFunctions.addEvent(t,"play",(function(){n.trigger(i.events.START_PLAYING)})),g_ugFunctions.addEvent(t,"pause",(function(){n.trigger(i.events.STOP_PLAYING)})),g_ugFunctions.addEvent(t,"ended",(function(){n.trigger(i.events.STOP_PLAYING),n.trigger(i.events.VIDEO_ENDED)}))},error:function(e){trace(e)}})}this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.loadAPI=function(){return 1==g_ugHtml5MediaAPI.isAPILoaded||(o()?(g_ugHtml5MediaAPI.isAPILoaded=!0,!0):(g_ugFunctions.loadJs("http://www.citizengage.co/cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/mediaelement.min.js",!0),g_ugFunctions.loadCss("http://www.citizengage.co/cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/mediaelementplayer.min.css",!0),void(g_ugHtml5MediaAPI.isAPILoaded=!0)))},this.putVideo=function(t,i,n,s,u){if(o())return a(t,i,n,s,u),!0;this.loadAPI(),e=setInterval((function(){o()&&(a(t,i,n,s,u),clearInterval(e))}),500)},this.doCommand=function(e){if(null==t)return!1;if(0==g_isPlayerReady)return!1;switch(e){case"play":t.play();break;case"pause":t.pause()}},this.pause=function(){i.doCommand("pause")},this.play=function(){i.doCommand("play")}}function UGVimeoAPI(){this.isAPILoaded=!1;var e,t,i=this,n=jQuery(this),o=null,a=!1,s=!1;function u(){return"undefined"!=typeof Froogaloop}function r(e,u,r,d,l){o=null,a=!1;var c=location.protocol+"//player.vimeo.com/video/"+u+"?api=1";!0===l&&(c+="&amp;byline=0&amp;autoplay=1&amp;title=0&amp;portrait=0");var y="<iframe src="+c+" width='"+r+"' height='"+d+"' frameborder='0' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>";jQuery("#"+e).html(y);var v=jQuery("#"+e+" iframe")[0];(o=Froogaloop(v)).addEvent("ready",(function(){o&&(a=!0,function(){if(!o)return!1;o.addEvent("cuechange",(function(){1==s&&i.play()})),o.addEvent("play",(function(){n.trigger(i.events.START_PLAYING)})),o.addEvent("pause",(function(){n.trigger(i.events.STOP_PLAYING)})),o.addEvent("finish",(function(){n.trigger(i.events.STOP_PLAYING),n.trigger(i.events.VIDEO_ENDED)}))}())})),t=e}this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.loadAPI=function(){return 1==g_ugVimeoAPI.isAPILoaded||(u()?(g_ugVimeoAPI.isAPILoaded=!0,!0):(g_ugFunctions.loadJs("http://www.citizengage.co/f.vimeocdn.com/js/froogaloop2.min.js",!0),void(g_ugVimeoAPI.isAPILoaded=!0)))},this.doCommand=function(e){return null!=o&&(0!=a&&void o.api(e))},this.pause=function(){i.doCommand("pause")},this.play=function(){i.doCommand("play")},this.destroy=function(){o&&(o.api("unload"),o=null,a=!1),t&&jQuery("#"+t).html("")},this.putVideo=function(t,i,n,o,a){if(u())return r(t,i,n,o,a),!0;this.loadAPI(),e=setInterval((function(){u()&&(r(t,i,n,o,a),clearInterval(e))}),500)},this.isPlayerReady=function(){return!(!a||!o)},this.changeVideo=function(e,t){if(0==i.isPlayerReady())return!1;s=t,o.api("loadVideo",e)},this.getVideoImages=function(e,t,i){var n=location.protocol+"//vimeo.com/api/v2/video/"+e+".json";jQuery.get(n,{},(function(e){var n={};n.preview=e[0].thumbnail_large,n.thumb=e[0].thumbnail_medium,i(t,n)}))}}function UGYoutubeAPI(){this.isAPILoaded=!1;var e,t,i=this,n=null,o=!1,a=jQuery(this),s=-1,u={video_youtube_showinfo:!0};function r(e,i,a,s,r){n&&o&&n.destroy();var d={controls:2,showinfo:u.video_youtube_showinfo,rel:0};!0===r&&(d.autoplay=1),o=!1,n=new YT.Player(e,{height:s,width:a,videoId:i,playerVars:d,events:{onReady:l,onStateChange:c}}),t=e}function d(){return"undefined"!=typeof YT&&void 0!==YT.Player}function l(){o=!0}function c(){if("function"!=typeof n.getPlayerState)return trace("Youtube API error: can't get player state"),!1;var e=n.getPlayerState();switch(e){case YT.PlayerState.PLAYING:a.trigger(i.events.START_PLAYING);break;case YT.PlayerState.ENDED:a.trigger(i.events.STOP_PLAYING),a.trigger(i.events.VIDEO_ENDED);break;default:s==YT.PlayerState.PLAYING&&a.trigger(i.events.STOP_PLAYING)}s=e}this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.setOptions=function(e){u=jQuery.extend(u,e)},this.putVideo=function(t,i,n,o,a){if(d())return r(t,i,n,o,a),!0;this.loadAPI(),e=setInterval((function(){d()&&(r(t,i,n,o,a),clearInterval(e))}),500)},this.loadAPI=function(){return 1==g_ugYoutubeAPI.isAPILoaded||("undefined"!=typeof YT?(g_ugYoutubeAPI.isAPILoaded=!0,!0):(g_ugFunctions.loadJs("https://www.youtube.com/player_api",!1),void(g_ugYoutubeAPI.isAPILoaded=!0)))},this.doCommand=function(e,t){if(!n)return!0;if(0==o)return!1;switch(e){case"play":if("function"!=typeof n.playVideo)return!1;n.playVideo();break;case"pause":if("function"!=typeof n.pauseVideo)return!1;n.pauseVideo();break;case"seek":if("function"!=typeof n.seekTo)return!1;n.seekTo(t);break;case"stopToBeginning":var i=n.getPlayerState();switch(n.pauseVideo(),i){case YT.PlayerState.PLAYING:case YT.PlayerState.ENDED:case YT.PlayerState.PAUSED:n.seekTo(0)}}},this.play=function(){i.doCommand("play")},this.pause=function(){i.doCommand("pause")},this.destroy=function(){try{n&&(o=!1,n.clearVideo(),n.destroy())}catch(e){jQuery("#"+t).html("")}},this.stopToBeginning=function(){i.doCommand("stopToBeginning")},this.changeVideo=function(e,t){if(0==i.isPlayerReady())return!1;t&&1==t?n.loadVideoById(e,0,"large"):n.cueVideoById(e,0,"large")},this.isPlayerReady=function(){return!(!o||!n)},this.getVideoImages=function(e){var t={};return t.preview="https://i.ytimg.com/vi/"+e+"/sddefault.jpg",t.thumb="https://i.ytimg.com/vi/"+e+"/default.jpg",t}}function UGVideoPlayer(){var e,t,i,n,o,a,s,u,r=this,d=jQuery(this),l=new UGFunctions,c=new UGYoutubeAPI,y=new UGVimeoAPI,v=new UGHtml5MediaAPI,p=new UGSoundCloudAPI,f=new UGWistiaAPI,g=null,h={video_enable_closebutton:!0};this.events={SHOW:"video_show",HIDE:"video_hide",PLAY_START:"video_play_start",PLAY_STOP:"video_play_stop",VIDEO_ENDED:"video_ended"};var P={standAloneMode:!1,youtubeInnerID:"",vimeoPlayerID:"",html5PlayerID:"",wistiaPlayerID:"",soundCloudPlayerID:""};function I(){r.hide()}function m(){d.trigger(r.events.PLAY_START),a&&a.hide()}function _(){d.trigger(r.events.PLAY_STOP),a&&a.show()}function A(){d.trigger(r.events.VIDEO_ENDED)}function w(e){var t=["youtube","vimeo","html5","soundcloud","wistia"];for(var a in t){var r=t[a];if(r!=e)switch(r){case"youtube":c.pause(),c.destroy(),i.hide();break;case"vimeo":y.pause(),y.destroy(),n.hide();break;case"html5":v.pause(),o.hide();break;case"soundcloud":p.pause(),p.destroy(),s.hide();break;case"wistia":f.pause(),u.hide()}}}this.init=function(t,i,n){if(!(e=n))throw new Error("missing gallery ID for video player, it's a must!");h=jQuery.extend(h,t),c.setOptions(h),i&&1==i&&(P.standAloneMode=!0)},this.setHtml=function(r){P.youtubeInnerID=e+"_youtube_inner",P.vimeoPlayerID=e+"_videoplayer_vimeo",P.html5PlayerID=e+"_videoplayer_html5",P.wistiaPlayerID=e+"_videoplayer_wistia",P.soundCloudPlayerID=e+"_videoplayer_soundcloud";var d="<div class='ug-videoplayer' style='display:none'>";d+="<div class='ug-videoplayer-wrapper ug-videoplayer-youtube' style='display:none'><div id='"+P.youtubeInnerID+"'></div></div>",d+="<div id='"+P.vimeoPlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-vimeo' style='display:none'></div>",d+="<div id='"+P.html5PlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-html5'></div>",d+="<div id='"+P.soundCloudPlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-soundcloud'></div>",d+="<div id='"+P.wistiaPlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-wistia'></div>",0==P.standAloneMode&&1==h.video_enable_closebutton&&(d+="<div class='ug-videoplayer-button-close'></div>"),d+="</div>",r.append(d),t=r.children(".ug-videoplayer"),i=t.children(".ug-videoplayer-youtube"),n=t.children(".ug-videoplayer-vimeo"),o=t.children(".ug-videoplayer-html5"),s=t.children(".ug-videoplayer-soundcloud"),u=t.children(".ug-videoplayer-wistia"),0==P.standAloneMode&&1==h.video_enable_closebutton&&(a=t.children(".ug-videoplayer-button-close"))},this.destroy=function(){a&&(a.off("click"),a.off("touchend")),jQuery(c).off(c.events.START_PLAYING),jQuery(c).off(c.events.STOP_PLAYING),jQuery(y).off(y.events.START_PLAYING),jQuery(y).off(y.events.STOP_PLAYING),jQuery(v).off(v.events.START_PLAYING),jQuery(v).off(v.events.STOP_PLAYING),jQuery(p).off(p.events.START_PLAYING,m),jQuery(p).off(p.events.STOP_PLAYING,_),jQuery(f).off(f.events.START_PLAYING,m),jQuery(f).off(f.events.STOP_PLAYING,_),g=null},this.initEvents=function(){a&&(l.setButtonMobileReady(a),l.setButtonOnClick(a,I)),jQuery(c).on(c.events.START_PLAYING,m),jQuery(c).on(c.events.STOP_PLAYING,_),jQuery(c).on(c.events.VIDEO_ENDED,A),jQuery(y).on(y.events.START_PLAYING,m),jQuery(y).on(y.events.STOP_PLAYING,_),jQuery(y).on(y.events.VIDEO_ENDED,A),jQuery(v).on(v.events.START_PLAYING,m),jQuery(v).on(v.events.STOP_PLAYING,_),jQuery(v).on(v.events.VIDEO_ENDED,A),jQuery(p).on(p.events.START_PLAYING,m),jQuery(p).on(p.events.STOP_PLAYING,_),jQuery(p).on(p.events.VIDEO_ENDED,A),jQuery(f).on(f.events.START_PLAYING,m),jQuery(f).on(f.events.STOP_PLAYING,_),jQuery(f).on(f.events.VIDEO_ENDED,A)},this.setSize=function(e,i){l.setElementSize(t,e,i),a&&l.placeElement(a,"right","top")},this.setPosition=function(e,i){l.placeElement(t,e,i)},this.getObject=function(){return t},this.show=function(){if(1==r.isVisible())return!0;t.show(),t.fadeTo(0,1),a&&a.show(),d.trigger(r.events.SHOW)},this.hide=function(){if(0==r.isVisible())return!0;w(),g=null,t.hide(),d.trigger(r.events.HIDE)},this.getActiveAPI=function(){switch(g){case"youtube":return c;case"vimeo":return y;case"wistia":return f;case"soundcloud":return p;case"html5":return v;default:return null}},this.pause=function(){var e=r.getActiveAPI();if(null==e)return!1;"function"==typeof e.pause&&e.pause()},this.isVisible=function(){return t.is(":visible")},this.playYoutube=function(e,t){if(void 0===t)t=!0;w("youtube"),i.show(),0==i.children("#"+P.youtubeInnerID).length&&i.append("<div id='"+P.youtubeInnerID+"'></div>"),1==c.isPlayerReady()&&1==P.standAloneMode?c.changeVideo(e,t):c.putVideo(P.youtubeInnerID,e,"100%","100%",t),g="youtube"},this.playVimeo=function(e,t){if(void 0===t)t=!0;w("vimeo"),n.show(),y.putVideo(P.vimeoPlayerID,e,"100%","100%",t),g="vimeo"},this.playHtml5Video=function(e,t,i,n,a){if(void 0===a)a=!0;w("html5"),o.show();var s={ogv:e,webm:t,mp4:i,posterImage:n};v.putVideo(P.html5PlayerID,s,"100%","100%",a),g="html5"},this.playSoundCloud=function(e,t){if(void 0===t)t=!0;w("soundcloud"),s.show(),p.putSound(P.soundCloudPlayerID,e,"100%","100%",t),g="soundcloud"},this.playWistia=function(e,t){if(void 0===t)t=!0;w("wistia"),u.show(),f.putVideo(P.wistiaPlayerID,e,"100%","100%",t),g="wistia"}}var g_ugYoutubeAPI=new UGYoutubeAPI,g_ugVimeoAPI=new UGVimeoAPI,g_ugHtml5MediaAPI=new UGHtml5MediaAPI,g_ugSoundCloudAPI=new UGSoundCloudAPI,g_ugWistiaAPI=new UGWistiaAPI;